<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Introduction to R</title>
  <meta name="description" content="">
  <meta name="author" content="Tom Heslop">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="stylesheet" href="libraries/frameworks/revealjs/css/reveal.min.css">
  <link rel="stylesheet" href="libraries/frameworks/revealjs/css/theme/night.css" id="theme">
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" id="theme">
  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->  <link rel="stylesheet" href = "libraries/widgets/bootstrap/css/bootstrap.css">
<link rel="stylesheet" href = "assets/css/styles.css">

</head>
<body>
  <div class="reveal">
    <div class="slides">
      <section class='' data-state='' id='slide-1'>
  <h1>Introduction to R</h1>
  <h2>Matchbook Traders Conference 2015</h2>

<p><br></p>

<hr>

<p><br></p>

<h3 class="name">Tom Heslop</h3>

<h3 class="name"><a href="https://twitter.com/UTVilla">@UTVilla</a></h3>

<p><br></p>

<hr>

<p><br></p>

<ul class="slide-list">
    <li>slides <a href="http://bit.ly/1UNtCQ3">http://bit.ly/1UNtCQ3</a></li>
    <li>source <a href="http://bit.ly/1O9fAE2">http://bit.ly/1O9fAE2</a></li>
</ul>

<p><aside class="notes">
    <p style="font-size:15px">Introduce myself. Thank Scott Ferguson. Thank Matchbook</p>
    <p style="font-size:15px">Slides found here.</p>
</aside></p>

</section>
<section>
   <section class='title' data-state=''>
    
    <h1 class="slide-title">subjects to cover</h1>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <ul class="subject-list">
    <li class="name">background</li>
    <br>
    <li class="name">introduce <a href="https://cran.r-project.org/">R</a></li>
    <br>
    <li class="name">introduce <a href="https://git-scm.com/">Git</a> (very briefly)</li>
    <br>
    <li class="name">
        build your own R packages
        <br>
        <ul>
            <li><a href="http://durtal.github.io/RcappeR/">RcappeR</a> - horse racing</li>
            <li><a href="http://durtal.github.io/servevolleyR/">servevolleyR</a> - tennis</li>
            <li><a href="http://durtal.github.io/fantasysocceR/">fantasysocceR</a>, <a href="http://durtal.github.io/rBloodstock/">rBloodstock</a>, <a href="http://durtal.github.io/calheatmapR/">calheatmapR</a>, <a href="http://durtal.github.io/betfaiR/">betfaiR</a> (incomplete)</li>
        </ul>
    </li>
    <br>
    <li class="name">
        example workflow
        <br>
        <ul>
            <li>use R, Git, other open source tools to manage projects/analysis</li>
            <li>use community built packages to collect and clean data</li>
            <li>use my own <a href="http://durtal.github.io/servevolleyR/">servevolleyR</a> package on the collected data</li>
            <li>present findings using more community built packages</li>
        </ul>
    </li>
</ul>

<p><aside class="notes" style="font-size: 10px">
    <p style="font-size:15px">A bit of background, where am I coming from with regard to R, why I learnt R.</p>
    <p style="font-size:15px">Introduce R, what it is, some packages.</p>
    <p style="font-size:15px">Introduce Git, briefly, important when writing lots of code.</p>
    <p style="font-size:15px">Build your own tools, talk about a couple of R packages I&#39;ve built that have made my life easier.</p>
    <p style="font-size:15px">An example workflow, involving servevolleyR, some other R packages, git and Make.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='' data-state=''>
    
    <h1 class="slide-title">background</h1>

<p><aside class="notes" style="font-size: 10px">
    <p style="font-size:15px">No programming background, entirely self taught.</p>
    <p style="font-size:15px">If anyone can guess what I studied at Uni there&#39;s a drink waiting for them.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3 style="text-align: left">january 2013</h3>

<h3>an Excel user</h3>

<div>
    <img src="assets/img/chain-smoking.jpg" style="width:50%">
</div>

<p><aside class="notes" style="font-size: 10px">
    <p style="font-size:15px">Using Excel meant a lot of manual data entry, usually horse racing, very time-consuming.</p>
    <p style="font-size:15px">Excel also used for basic analysis, but has limitations.</p>
    <p style="font-size:15px">Excel benefits are that you can see and visually inspect data quite easily.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3 style="text-align: left">may 2013</h3>

<h3>what is R?</h3>

<div>
    <img src="assets/img/bert-ernie-r.jpg" style="width:50%">
</div>

<p><aside class="notes" style="font-size: 10px">
    <p style="font-size:15px">Frustrated at Excel freezing and crashing.</p>
    <p style="font-size:15px">Must be something better, seen Mike Bailey (@ slipperytoad) tweet about R.</p>
    <p style="font-size:15px">Curiosity aroused.</p>
    <p style="font-size:15px">I had a project in mind to keep me motivated - make my horse racing work easier.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3 style="text-align: left">june 2013</h3>

<h3>type first R command</h3>

<div>
    <img src="assets/img/cookie-monster.gif" style="width:60%">
</div>

<p><aside class="notes" style="font-size: 10px">
    <p style="font-size:15px">First R commands.</p>
    <p style="font-size:15px">Excited at potential, very basic commands like <code>summary</code> and <code>plot</code>, but I made a mess.</p>
    <p style="font-size:15px">Just wrote code.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3 style="text-align: left">june 2014</h3>

<h3>I understand...</h3>

<div>
    <img src="assets/img/dog-fail.gif" style="width: 60%">
    <h3>...no I don't</h3>
</div>

<p><aside class="notes" style="font-size: 10px">
    <p style="font-size:15px">Every so often I felt like I was making no progress despite my best efforts.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3 style="text-align: left">december 2014</h3>

<h3>release my second R package</h3>

<div>
    <img src="assets/img/i-am-invincible.gif" style="width: 60%">
</div>

<p><aside class="notes" style="font-size: 10px">
    <p style="font-size:15px">Every so often I felt like I was making real progress, occasionally a lightbulb went off.</p>
    <p style="font-size:15px">I released my second R package, which helped with horse racing analysis, we&#39;ll see some of it later, this was the reason why I wanted to learn R, so was delighted to reach this point.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>always learning...</h3>

<p><img src="assets/img/cookie-monster.gif" style="width: 100px; height: 75px"><img src="assets/img/cookie-monster.gif" style="width: 100px; height: 75px"><img src="assets/img/dog-fail.gif" style="width: 100px; height: 75px"><img src="assets/img/bert-ernie-r.jpg" style="width:100px; height:75px"><img src="assets/img/cookie-monster.gif" style="width: 100px; height: 75px"><img src="assets/img/cookie-monster.gif" style="width: 100px; height: 75px"><img src="assets/img/dog-fail.gif" style="width: 100px; height: 75px"><img src="assets/img/i-am-invincible.gif" style="width: 100px; height: 75px"><img src="assets/img/dog-fail.gif" style="width: 100px; height: 75px"><img src="assets/img/cookie-monster.gif" style="width: 100px; height: 75px"><img src="assets/img/bert-ernie-r.jpg" style="width:100px; height:75px"><img src="assets/img/cookie-monster.gif" style="width: 100px; height: 75px"><img src="assets/img/i-am-invincible.gif" style="width: 100px; height: 75px"><img src="assets/img/cookie-monster.gif" style="width: 100px; height: 75px"><img src="assets/img/dog-fail.gif" style="width: 100px; height: 75px"><img src="assets/img/dog-fail.gif" style="width: 100px; height: 75px"><img src="assets/img/dog-fail.gif" style="width: 100px; height: 75px"><img src="assets/img/bert-ernie-r.jpg" style="width:100px; height:75px"><img src="assets/img/i-am-invincible.gif" style="width: 100px; height: 75px"><img src="assets/img/i-am-invincible.gif" style="width: 100px; height: 75px"><img src="assets/img/cookie-monster.gif" style="width: 100px; height: 75px"><img src="assets/img/cookie-monster.gif" style="width: 100px; height: 75px"><img src="assets/img/cookie-monster.gif" style="width: 100px; height: 75px"><img src="assets/img/i-am-invincible.gif" style="width: 100px; height: 75px"><img src="assets/img/bert-ernie-r.jpg" style="width:100px; height:75px"><img src="assets/img/dog-fail.gif" style="width:100px; height:75px"><img src="assets/img/cookie-monster.gif" style="width:100px; height:75px"><img src="assets/img/cookie-monster.gif" style="width:100px; height:75px"><img src="assets/img/i-am-invincible.gif" style="width:100px; height:75px"><img src="assets/img/i-am-invincible.gif" style="width:100px; height:75px"><img src="assets/img/cookie-monster.gif" style="width:100px; height:75px"><img src="assets/img/i-am-invincible.gif" style="width:100px; height:75px"><img src="assets/img/dog-fail.gif" style="width:100px; height:75px"><img src="assets/img/cookie-monster.gif" style="width:100px; height:75px"><img src="assets/img/cookie-monster.gif" style="width:100px; height:75px"><img src="assets/img/dog-fail.gif" style="width: 100px; height: 75px"><img src="assets/img/i-am-invincible.gif" style="width:100px; height:75px"><img src="assets/img/cookie-monster.gif" style="width:100px; height:75px"><img src="assets/img/dog-fail.gif" style="width: 100px; height: 75px"><img src="assets/img/i-am-invincible.gif" style="width:100px; height:75px"></p>

<p><aside class="notes" style="font-size: 10px">
    <p style="font-size:15px">Timeline since June 2013 looks like this, moments of despair, failure, struggle.</p>
    <p style="font-size:15px">punctured with moments of triumph, success and progress.</p>
    <p style="font-size:15px">However, I&#39;m always learning.</p>
    <p style="font-size:15px">so tag of &#39;R programming specialist&#39; is a bit of marketing, still learning every day.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='title' data-state=''>
    
    <h1 class="slide-title">what is R?</h1>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2><a href="https://www.r-project.org/">R is a free software environment for statistical computing and graphics</a></h2>

<p><aside class="notes" style="font-size: 10px">
    <p style="font-size:15px">The official R homepage</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2 style="text-align:left"><a href="http://www.inside-r.org/what-is-r">R is...</a></h2>

<h3>...open source</h3>

<h3>...a programming language</h3>

<h3>...data analysis software</h3>

<h3>...a community</h3>

<p><sub><a href="http://www.inside-r.org/">inside-r.org</a></sub></p>

<p><aside class="notes" style="font-size: 10px">
    <p style="font-size:15px">Open source:  it&#39;s free - available on all operating systems, Linux, Windows, OSX - source code is available to read, many eyes looking over the code means bugs can be caught and improvements made - integrates with other open source software, such as Git and Make - did I mention it&#39;s free, which means potential collaboration with others easier</p>
    <p style="font-size:15px">Programming Language:  designed by statisticians for statistics, so can appear quirky and idiosyncratic to users of other languages - can be used interactively or writing scripts - facilitates reproducibility</p>
    <p style="font-size:15px">data analysis software and community are worth more detailed explanations</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='title' data-state=''>
    
    <h1 class="slide-title">data analysis software</h1>

<p><aside class="notes">
    <p style="font-size:15px">To understand what is required from data analysis software, we need to look at the workflow of data analysis</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>data analysis workflow</h2>

<p><img src="assets/img/hadley-process.jpg"></p>

<p><sub><a href="https://dl.dropboxusercontent.com/u/41902/future-da-5-unconf.pdf">Hadley Wickham, Chief Scientist RStudio</a></sub></p>

<p><aside class="notes" style="font-size: 10px">
    <p style="font-size: 15px">A slide by Hadley Wickham, of RStudio.</p>
    <p style="font-size: 15px">This workflow is pretty standard for any data analysis you embark on, for any problem or question you might wwant to solve or answer, reflecting the non linear nature of analysis.</p>
    <p style="font-size: 15px">Start with collecting data, tidying and cleaning, munging and wrangling, exploring, modelling, and finally communicating</p>
    <p style="font-size: 15px">Hadley has built a huge number of packages that have helped make this process easier, more efficient, faster, and consistent</p>
    <p style="font-size: 15px">The packages he&#39;s built has become known as the Hadleyverse, you will use packages built by Hadley, his impact on the R community is huge.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>obtain/collect</h2>

<ul class="subject-list">
    <li class="name">Excel
        <ul>
            <li>csv, xls, xlsx</li>
        </ul>
     </li>
    <br>
    <li class="name">Databases
        <ul>
            <li>SQL Server, MySQL, postgresQL, SQLite</li>
            <li>MongoDB</li>
            <li>Neo4j</li>
            <li class='..</li>'></ul>
    </li>
    <br>
    <li class="name">SAS, SPSS, Stata</li>
    <br>
    <li class="name">Web
        <ul>
            <li>API</li>
            <li>web scraping</li>
        </ul>
    </li>
    <br>
</ul>

<p><aside class="notes">
    <p style="font-size: 15px">R can obtain data from a huge variety of sources, making it incredibly flexible compared with some proprietary software</p>
    <p style="font-size: 15px">Data can be collected from multiple sources and munged/wrangled to make a more complete dataset</p>
    <p style="font-size: 15px">Community contribute packages to help get data into R, this is the first step so packages are heavily used, meaning they are typically well developed and maintained</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <pre><code class="r">tournaments &lt;- read.csv(&quot;example/data/tournaments.csv&quot;, stringsAsFactors = FALSE)
</code></pre>

<pre><code class="r">head(tournaments, 2)
</code></pre>

<pre><code>##       name                                  link               venue
## 1 Brisbane /en/tournaments/brisbane/339/overview Brisbane, Australia
## 2     Doha     /en/tournaments/doha/451/overview         Doha, Qatar
##                      date      surface
## 1 2015.01.04 - 2015.01.11 Outdoor Hard
## 2 2015.01.05 - 2015.01.10 Outdoor Hard
</code></pre>

<p><aside class="notes">
    <p style="font-size: 15px">reading excel files is very easy, stringsAsFactors is defaulted to TRUE, very rare that you will want to leave the default</p>
    <p style="font-size: 15px">the head command just shows the first two rows of our newly imported dataset</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>obtain/collect packages</h2>

<ul class="subject-list">
    <li class="name">Excel
        <ul>
            <li><code>read.csv</code>, <code>read.table</code>, <code>read.delim</code></li>
            <li><a href="https://github.com/hadley/readxl">readxl</a></li>
            <li><a href="https://cran.rstudio.com/web/packages/xlsx/">xlsx</a></li>
        </ul>
     </li>
    <br>
    <li class="name">Databases
        <ul>
            <li>SQL: <a href="https://cran.rstudio.com/web/packages/RODBC/">RODBC</a>, <a href="https://cran.r-project.org/web/packages/RMySQL/index.html">RMySQL</a>, <a href="https://cran.r-project.org/web/packages/RPostgreSQL/index.html">RPostgresQL</a>, <a href="https://cran.r-project.org/web/packages/RSQLite/index.html">RSQLite</a></li>
            <li>MongoDB: <a href="https://cran.r-project.org/web/packages/mongolite/index.html">mongolite</a>, <a href="https://cran.r-project.org/web/packages/rmongodb/index.html">rmongodb</a></li>
            <li>Neo4j: <a href="https://github.com/nicolewhite/RNeo4j">RNeo4j</a></li>
        </ul>
    </li>
    <br>
    <li class="name">SAS, SPSS, Stata:
        <ul>
            <li><a href="https://cran.r-project.org/web/packages/foreign/index.html">foreign</a></li>
        </ul>
    </li>
    <br>
    <li class="name">Web
        <ul>
            <li>API: <a href="https://cran.r-project.org/web/packages/httr/index.html">httr</a>, multiple packages for specific APIs (official and unofficial APIs)</li>
            <li>web scraping: <a href="https://cran.r-project.org/web/packages/rvest/index.html">rvest</a></li>
        </ul>
    </li>
    <br>
</ul>

<p><aside class="notes">
    <p style="font-size: 15px">This list is far from extensive, but all packages should have strong documentation about how to use the functions therein, along with examples</a>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>scrub/clean/munge</h2>

<pre><code class="r">str(tournaments)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    66 obs. of  5 variables:
##  $ name   : chr  &quot;Brisbane&quot; &quot;Doha&quot; &quot;Chennai&quot; &quot;Sydney&quot; ...
##  $ link   : chr  &quot;/en/tournaments/brisbane/339/overview&quot; &quot;/en/tournaments/doha/451/overview&quot; &quot;/en/tournaments/chennai/891/overview&quot; &quot;/en/tournaments/sydney/338/overview&quot; ...
##  $ venue  : chr  &quot;Brisbane, Australia&quot; &quot;Doha, Qatar&quot; &quot;Chennai, India&quot; &quot;Sydney, Australia&quot; ...
##  $ date   : chr  &quot;2015.01.04 - 2015.01.11&quot; &quot;2015.01.05 - 2015.01.10&quot; &quot;2015.01.05 - 2015.01.11&quot; &quot;2015.01.11 - 2015.01.17&quot; ...
##  $ surface: chr  &quot;Outdoor Hard&quot; &quot;Outdoor Hard&quot; &quot;Outdoor Hard&quot; &quot;Outdoor Hard&quot; ...
</code></pre>

<pre><code class="r">library(stringr)
tournaments$start_date &lt;- str_extract(tournaments$date,
    &quot;^[[:digit:]]{4}\\.[[:digit:]]{2}\\.[[:digit:]]{2}&quot;)
tournaments$end_date &lt;- str_extract(tournaments$date,
    &quot;[[:digit:]]{4}\\.[[:digit:]]{2}\\.[[:digit:]]{2}$&quot;)
</code></pre>

<pre><code>##       name                    date start_date   end_date
## 1 Brisbane 2015.01.04 - 2015.01.11 2015.01.04 2015.01.11
## 2     Doha 2015.01.05 - 2015.01.10 2015.01.05 2015.01.10
</code></pre>

<p><aside class="notes">
    <p style="font-size:15px">data will rarely be clean, so requires some investigation, the str command lets us look at the structure of the data</p>
    <p style="font-size:15px">cleaning can involve extracting additional variables, as the slide shows, we want to add the start_date variable</p>
    <p style="font-size:15px">this is done with the stringr package for manipulating strings and regular expressions, used to match a sequence of characters, this regular expression looks for a string to start with 4 digits, followed by a full stop, followed by 2 digits, a full stop, then 2 more digits, the function str_extract extracts any value that matches this.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>scrub/clean packages</h2>

<ul class="subject-list">
    <li class="name">subsetting, joining, summarising, mutating datasets:
        <ul>
            <li><a href="https://cran.r-project.org/web/packages/dplyr/index.html">dplyr</a></li>
            <li><a href="https://cran.r-project.org/web/packages/tidyr/index.html">tidyr</a></li>
            <li><a href="https://cran.r-project.org/web/packages/reshape2/index.html">reshape2</a></li>
            <li><a href="https://cran.r-project.org/web/packages/data.table/index.html">data.table</a></li>
        </ul>
     </li>
    <br>
    <li class="name">string manipulation
        <ul>
            <li><a href="https://cran.r-project.org/web/packages/stringr/index.html">stringr</a></li>
            <li><code>gsub</code>, <code>grep</code>, <code>grepl</code></li>
        </ul>
    </li>
    <br>
    <li class="name">dates
        <ul>
            <li><a href="https://cran.r-project.org/web/packages/lubridate/index.html">lubridate</a></li>
        </ul>
    </li>
    <br>
</ul>

<p><aside class="notes">
    <p style="font-size:15px">5 of these packages are Hadley Wickham packages, builds packages which do a few things very well, combination of his packages provides a powerful set of tools for all you data cleaning needs.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>explore/visualise</h2>

<pre><code class="r">summary(gulfstream)
</code></pre>

<pre><code>##      date                race         race_type              dist      
##  Length:2863        Min.   : 1.000   Length:2863        Min.   :6.000  
##  Class :character   1st Qu.: 2.000   Class :character   1st Qu.:6.000  
##  Mode  :character   Median : 5.000   Mode  :character   Median :8.000  
##                     Mean   : 4.997                      Mean   :7.088  
##                     3rd Qu.: 7.000                      3rd Qu.:8.000  
##                     Max.   :11.000                      Max.   :8.000  
##                                                                        
##      surf               value          going             trainer         
##  Length:2863        Min.   :12500   Length:2863        Length:2863       
##  Class :character   1st Qu.:17500   Class :character   Class :character  
##  Mode  :character   Median :21250   Mode  :character   Mode  :character  
##                     Mean   :23300                                        
##                     3rd Qu.:27250                                        
##                     Max.   :46200                                        
##                                                                          
##     jockey              j_clm             age              wgt     
##  Length:2863        Min.   : 0.000   Min.   : 2.000   Min.   :108  
##  Class :character   1st Qu.: 0.000   1st Qu.: 3.000   1st Qu.:118  
##  Mode  :character   Median : 0.000   Median : 4.000   Median :119  
##                     Mean   : 1.012   Mean   : 3.851   Mean   :119  
##                     3rd Qu.: 0.000   3rd Qu.: 5.000   3rd Qu.:121  
##                     Max.   :10.000   Max.   :10.000   Max.   :127  
##                                                                    
##       gate            pos           horse              fintime      
##  Min.   : 1.00   Min.   : 1.00   Length:2863        Min.   : 69.93  
##  1st Qu.: 3.00   1st Qu.: 3.00   Class :character   1st Qu.: 73.99  
##  Median : 5.00   Median : 5.00   Mode  :character   Median : 96.12  
##  Mean   : 5.12   Mean   : 5.12                      Mean   : 88.22  
##  3rd Qu.: 7.00   3rd Qu.: 7.00                      3rd Qu.:100.17  
##  Max.   :14.00   Max.   :14.00                      Max.   :122.35  
##                                                     NA&#39;s   :16      
##     sect_4f     
##  Min.   :44.33  
##  1st Qu.:46.77  
##  Median :47.52  
##  Mean   :47.67  
##  3rd Qu.:48.42  
##  Max.   :55.29  
##  NA&#39;s   :3
</code></pre>

<p><aside class="notes">
    <p style="font-size:15px">hugely important step as it can lead to identifying errors in the data</p>
    <p style="font-size:15px">can help and inform the cleaning of data</p>
    <p style="font-size:15px">helps enormously in getting to now your data</p>
    <p style="font-size:15px">the gulfstream dataset is included in my RcappeR horse racing package</p>
    <p style="font-size:15px">the summary command looks at each variable in the dataset and summarises it based on its type, so for numeric vectors the min, mean, median, max, 1st quartile and 3rd quartile are shown, as well as the number of missing values</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <pre><code class="r">ggplot(data = gulfstream) +
    geom_histogram(binwidth = 0.5, aes(x = fintime))
</code></pre>

<p><img src="assets/fig/gulfstream-histogram-1.png" alt="plot of chunk gulfstream-histogram"> 
<aside class="notes">
    <p style="font-size:15px">very easy to quickly plot data when using R interactively, here we plot a histogram of the fintime variable</p>
    <p style="font-size:15px">quick to see there looks to be two race distances</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <pre><code class="r">ggplot(data = gulfstream) +
    geom_point(aes(x = sect_4f, y = fintime))
</code></pre>

<pre><code>## Warning: Removed 16 rows containing missing values (geom_point).
</code></pre>

<p><img src="assets/fig/gulfstream-scatter-1.png" alt="plot of chunk gulfstream-scatter"> </p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>model</h2>

<ul class="subject-list">
    <li class="name">
        <a href="https://cran.r-project.org/web/packages/mgcv/index.html">mgcv</a> - generalised additive models
    </li>
    <br>
    <li class="name">
        <a href="https://cran.r-project.org/web/packages/lme4/index.html">lme4</a>/<a href="https://cran.r-project.org/web/packages/nlme/index.html">nlme</a> - linear and non linear mixed effects models
    </li>
    <br>
    <li class="name">
        <a href="https://cran.r-project.org/web/packages/neuralnet/index.html">neuralnet</a> - neural networks
    </li>
    <br>
    <li class="name">
        <a href="https://cran.r-project.org/web/packages/randomForest/index.html">randomForest</a> - random forest
    </li>
    <br>
    <li class="name">
        <a href="https://cran.r-project.org/web/packages/glmnet/index.html">glmnet</a> - lasso and other regression methods, with cross validation
    </li>
    <br>
    <li class="name">
        <a href="https://cran.r-project.org/web/packages/caret/index.html">caret</a> - classification and regression training
    </li>
</ul>

<p><aside class="notes">
    <p style="font-size:15px">Again a far from extensive list of packages.</p>
    <p style="font-size:15px">resources to help use these packages are usually extensive.</p>
    <p style="font-size:15px">designed and developed by prominent statisticians.  For example, the glmnet package was built by Trevor Hastie and Rob Tibshirani, of Stanford, who also run an online course I&#39;ll link to later, this course introduces some of the functions in their package.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>interpret/communicate</h2>

<ul class="subject-list">
    <li class="name">
        <a href="https://cran.r-project.org/web/packages/rmarkdown/index.html">rmarkdown</a> - build dynamic documents and make your workflow reproducible. Uses the <a href="https://cran.r-project.org/web/packages/knitr/index.html">knitr</a> package
     </li>
    <br>
    <li class="name">
        <a href="https://cran.r-project.org/web/packages/shiny/index.html">shiny</a> - interactive web applications
    </li>
    <br>
    <li class="name">
        <a href="https://cran.r-project.org/web/packages/htmlwidgets/index.html">htmlwidgets</a> - interactive visualisations that use existing Javascript libraries
        <ul>
            <li><a href="https://cran.r-project.org/web/packages/DiagrammeR/index.html">DiagrammeR</a> - diagrams</li>
            <li><a href="https://cran.r-project.org/web/packages/dygraphs/index.html">dygraphs</a> - time series</li>
            <li><a href="https://cran.r-project.org/web/packages/leaflet/index.html">leaflet</a> - maps</li>
            <li><a href="https://cran.r-project.org/web/packages/ggvis/index.html">ggvis</a> - interactive <code>ggplot2</code></li>
        </ul>
    </li>
</ul>

<p><aside class="notes">
    <p style="font-size:15px">rmarkdown allows you to combine your R code with text into a single document, when rendered the R code will produce results, so your document becomes dynamic, and you can reproduce results.</p>
    <p style="font-size:15px">these slides are built with Rmarkdown, so the plots you saw a few slides ago are the output of running the R code above, if I change the R code and re-render then the plot automatically updates</p>
    <p style="font-size:15px">the example workflow I walk through later builds an entire website using Rmarkdown and a few other open source tools.</p>
    <p style="font-size:15px">it also uses a htmlwidget to present results.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='title' data-state=''>
    
    <h1 class="slide-title">a community</h1>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <ul class="subject-list">
    <li class="name">dedicated and passionate community who improve and extend R</li>
    <br>
    <li class="name">over 7000 R packages on CRAN</li>
    <br>
    <li class="name">
        packages built by experts in their field, including
        <br>
        <ul>
            <li>statistics</li>
            <li>machine learning</li>
            <li>finance</li>
            <li>visualisation</li>
            <li>biology</li>
            ...
        </ul>
    </li>
    <br>
    <li class="name">many more packages available on Github/Bioconductor</li>
    <br>
    <li class="name">check out the <a href="https://twitter.com/search?f=tweets&vertical=default&q=%23rstats&src=typd">#rstats</a> hashtag for the latest articles on R</li>
</ul>

<p><aside class="notes">
    <p style="font-size: 15px">CRAN - Comprehensive R Archive Network</p>
    <p style="font-size: 15px">leveraging the knowledge and expertise of the community</p>
    <p style="font-size: 15px">an incredibly powerful set of tools at your disposal</p>
    <p style="font-size: 15px">community are prominent on twitter, posting short and incredibly interesting articles</p>
    <p style="font-size: 15px">articles often include code chunks that can be run, very useful in learning new skills/techniques, or learning about packages</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='title' data-state=''>
    
    <h1 class="slide-title">learn R</h1>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <ul class="subject-list">
    <li class="name">
        <a href="https://www.coursera.org/specialization/jhudatascience/1?utm_medium=courseDescripTop">Coursera courses run by Johns Hopkins</a>
        <br>
        <ul>
            <li><a href="https://www.coursera.org/course/rprog">R Programming</a></li>
            <li><a href="https://www.coursera.org/course/datascitoolbox">Data Science Toolbox</a></li>
            <li>includes introduction to git/github</li>
        </ul>
    </li>
    <br>
    <li class="name">
        <a href="https://class.stanford.edu/courses/HumanitiesScience/StatLearning/Winter2014/about">Statistical Learning by Stanford</a>
        <br>
        <ul>
            <li>accompanied by free book <a href="http://www-bcf.usc.edu/~gareth/ISL/">Introduction to Statistical Learning</a></li>
        </ul>
    </li>
    <br>
    <li class="name">
        <a href="http://stat545-ubc.github.io/index.html">Stat545 by University of British Columbia</a>
        <br>
        <ul>
            <li>course notes for Data Wrangling, Exploration and Analysis with R</li>
            <li>includes introduction to git/github</li>
        </ul>
    </li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <div>
    <img src="assets/img/write-shitty-code.jpg" style="width: 90%">
</div>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>code</h2>

<p><img src="assets/img/cookie-monster.gif" style="width:75%"></p>

<h2>code code code code code</h2>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='title' data-state=''>
    
    <h1 class="slide-title">what is Git?</h1>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2><a href="https://git-scm.com">Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency</a></h2>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2 style="text-align:left">Git allows you</h2>

<h3>...to organise and manage a collection of files</h3>

<h3>...to go back to older versions of the files</h3>

<h3>...branch out and add features with the flexibility to jump between project versions</h3>

<p><aside class="notes">
    <p style="font-size: 15px">Git can be incredibly helpful in managing files which make up a small project</p>
    <p style="font-size: 15px">tracking changes in files is incredibly powerful as you can inspect the changes you&#39;ve made over time, and even go back to previous versions</p>
    <p style="font-size: 15px">when used with code you write (whether it be R, Javascript, Python), being able to go back and forth, and track changes is invaluable</p>
    <p style="font-size: 15px">and the ability to create different branches of a project, such as an R package in one branch and a website with help pages in another</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>cleaner and clearer</h2>

<div style="width:50%; border: 10px solid:#000; height: 100%; float: left">

<h3>without git</h3>

<p>multiple files, all very similar</p>

<ul>
    <li><code>analysis.R</code></li>
    <li><code>analysis-1.R</code></li>
    <li><code>data.csv</code></li>
    <li><code>data-2.csv</code></li>
    <li><code>final-data.csv</code></li>
    <li><code>plot.png</code></li>
    <li><code>plot1.png</code></li>
    <li><code>final-plot.png</code></li>
    <li><code>final-report.docx</code></li>
    <li><code>report.docx</code></li>
    <li><code>tmp.R</code></li>
</ul>

</div>

<div style="width:50%; border: 10px solid:#000; height: 100%; float: right">

<h3>with git</h3>

<p>git keeps track of changes over <strong>time</strong></p>

<ul>
    <li><code>analysis.R</code></li>
    <li><code>data.csv</code></li>
    <li><code>final-report.docx</code></li>
</ul>

</div>

<p><aside class="notes">
    <p style="font-size: 15px">without Git a project might grow out of control as you re-write work or code, but you may want to preserve previous versions so new files are created, analysis-1.R, etc</p>
    <p style="font-size: 15px">with git, a project is much cleaner, but the previous versions are all available so you can travel back to older versions</p>
    <p style="font-size: 15px">with git, you also have the chance to create different branches of a project</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>fantasysocceR</h2>

<h3><code>master</code> branch</h3>

<p><img src="assets/img/fantasysocceR-master.jpg"></p>

<p><aside class="notes">
    <p style="font-size: 15px">so on the master, or main, branch of my fantasysocceR R package is the R code for the package</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>fantasysocceR</h2>

<h3><code>gh-pages</code> branch</h3>

<p><img src="assets/img/fantasysocceR-gh-pages.jpg"></p>

<p><aside class="notes">
    <p style="font-size: 15px">while the gh-pages branch of my the package are the pages which make up the online help pages for the package</p>
    <p style="font-size: 15px">both branches are doing very different things, but belong to the same project, so Git helps to organise these parts, rather than having multiple directories and files all doing very different things but possibly lacking organisation.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Many popular R packages are developed in the open</h3>

<p><br></p>

<p><img src="assets/img/github-ggplot2.jpg"></p>

<p><aside class="notes">
    <p style="font-size: 15px">ability to read code written by incredibly smart people is very useful in learning more about the language</p>
    <p style="font-size: 15px">ability to contribute to packages, spot bugs, help fix things</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='title' data-state=''>
    
    <h1 class="slide-title">RcappeR</h1>

<h3>to aid the analysis and handicapping of horse racing</h3>

<p><aside class="notes">
    <p style="font-size:15px">This was package was the reason I wanted to learn R, to help me with some horse racing analysis and handicapping I wanted to do</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2><a href="http://durtal.github.io/RcappeR/">help pages</a></h2>

<p><br></p>

<h2>install package</h2>

<pre><code class="r"># devtools package needed to install package from github
# install.packages(&#39;devtools&#39;)
devtools::install_github(&#39;durtal/RcappeR&#39;)
</code></pre>

<p><br></p>

<pre><code class="r">library(RcappeR)
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>simple cleaning tasks</h2>

<pre><code class="r">conv_times(times = c(&quot;1m39.99&quot;, &quot;1:12.78&quot;, &quot;1min23.34&quot;))
</code></pre>

<pre><code>## [1] 99.99 72.78 83.34
</code></pre>

<p><br></p>

<pre><code class="r">conv_len(lengths = c(&quot;0&quot;, &quot;nse&quot;, &quot;hd&quot;, &quot;nk&quot;, &quot;0.5&quot;, &quot;1 3/4&quot;))
</code></pre>

<pre><code>## [1] 0.00 0.02 0.10 0.20 0.50 1.75
</code></pre>

<p><br></p>

<pre><code class="r">conv_margins(btn_l = c(0, 0.02, 0.1, 0.2, 0.5, 1.75),
             cum_l = FALSE,
             win_time = 99.99)
</code></pre>

<pre><code>## [1]  99.99  99.99 100.01 100.05 100.15 100.50
</code></pre>

<p><aside class="notes">
    <p style="font-size:15px">write functions to do specific tasks, such as cleaning race times</p>
    <p style="font-size:15px">or converting lengths from characters describing distances into numeric</p>
    <p style="font-size:15px">or converting lengths into seconds beaten, or individual final times</p>
    <p style="font-size:15px">these are pretty simple tasks, but now can be done in a consistent manner</p>
    <p style="font-size:15px">I didn&#39;t get the functions right first time, git helped me track changes I made and avoid repeating errors</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>basic handicapping</h2>

<pre><code>##   pos wgt             horse fintime
## 1   1 122 don&#39;tgetmestarted   72.43
## 2   2 122   dream of scipio   74.18
## 3   3 122           beltram   74.54
## 4   4 122 gold bitten tiger   74.65
## 5   5 117  simon&#39;s a winner   74.68
</code></pre>

<pre><code class="r">races &lt;- gulfstream %&gt;%
    group_by(date, race) %&gt;%
    mutate(btn_sec = btn_sec(fintime),
           scale = lbs_per_sec(dist = dist, surf = &quot;dirt&quot;),
           btn_lbs = scale * btn_sec,
           diff_wgts = diff_at_wgts(btn_lbs = btn_lbs, wgt_carried = wgt))
</code></pre>

<pre><code>## Source: local data frame [5 x 7]
## 
##     pos   wgt             horse fintime btn_sec btn_lbs diff_wgts
##   (int) (int)             (chr)   (dbl)   (dbl)   (dbl)     (dbl)
## 1     1   122 don&#39;tgetmestarted   72.43    0.00    0.00      0.00
## 2     2   122   dream of scipio   74.18    1.75   29.75     29.75
## 3     3   122           beltram   74.54    2.11   35.87     35.87
## 4     4   122 gold bitten tiger   74.65    2.22   37.74     37.74
## 5     5   117  simon&#39;s a winner   74.68    2.25   38.25     43.25
</code></pre>

<p><aside class="notes">
    <p style="font-size:15px">This code combines RcappeR with dplyr to mutate a dataset of races, the gulfstream dataset.</p>
    <p style="font-size:15px">It groups rows together so individual races are in groups, then creates additional variables using existing variables and some of RcappeR&#39;s functions.</p>
    <p style="font-size:15px">btn_sec calculates the margin between the winners time and each horses time, scale is a very basic lbs per second scale which uses a simple loess regression based on the distance of the race (it should also take into account race speed), btn lbs converts the margin into llbs, and diff_wgts is the margin beaten and any difference in weight carried.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>more handicapping</h2>

<h3>family of functions uses zipf&#39;s law to handicap races</h3>

<ul class="subject-list">
    <li class="name">
        <code>zipf_race</code>
        <br>
        <ul>
            <li>function to handicap a single race with another race</li>
            <li><a href="http://durtal.github.io/RcappeR/handicap_with_zipf_race.html">vignette</a></li>
        </ul>
    </li>
    <br>
    <li class="name">
        <code>zipf_hcp</code>
        <br>
        <ul>
            <li>function to handicap a single race with numerous races</li>
            <li><a href="http://durtal.github.io/RcappeR/handicap_with_zipf_hcp.html">vignette</a></li>
        </ul>
    </li>
    <br>
    <li class="name">
        <code>zipf_init</code>
        <br>
        <ul>
            <li>initialises a handicap</li>
            <li><a href="http://durtal.github.io/RcappeR/initialise_a_handicap.html">vignette</a></li>
        </ul>
    </li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2><a href="http://durtal.github.io/gulfstream/">RcappeR @ Gulfstream Park</a></h2>

<p><img src="assets/img/RcappeR-website.jpg"></p>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='title' data-state=''>
    
    <h1 class="slide-title">servevolleyR</h1>

<h3>simulate tennis points, games, tiebreaks, sets and matches</h3>

<p><aside class="notes">
    <p style="font-size:15px">When Scott approached me about this conference, I decided to build this package</p>
    <p style="font-size:15px">Built over the course of the weekend break in matches at Wimbledon</p>
    <p style="font-size:15px">Package is quite simple, look forward to hearing Dan Weston talk later to learn from him</p>
    <p style="font-size:15px">Package uses some programming language basics like if else clauses, and while loops, as well as sampling, replicating random processes, and building objects to contain results</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2><a href="http://durtal.github.io/servevolleyR/">help pages</a></h2>

<p><br></p>

<h2>install package</h2>

<pre><code class="r"># devtools package needed
# install.packages(&#39;devtools&#39;)
devtools::install_github(&#39;durtal/servevolleyR&#39;)
</code></pre>

<p><br></p>

<pre><code class="r">library(servevolleyR)
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3><code>simPoint</code></h3>

<h3>simulates server winning a point on their serve</h3>

<pre><code class="r">simPoint(p = .75)
</code></pre>

<pre><code>## [1] 1
</code></pre>

<h3>used by all other <code>sim____</code> functions</h3>

<pre><code class="r">points &lt;- replicate(10000, simPoint(p = .75))
head(points, 20)
</code></pre>

<pre><code>##  [1] 0 0 1 1 1 0 0 0 1 1 1 1 1 0 0 1 0 0 0 1
</code></pre>

<pre><code class="r">table(points) / sum(table(points))
</code></pre>

<pre><code>## points
##      0      1 
## 0.2493 0.7507
</code></pre>

<p><aside class="notes">
    <p style="font-size:15px">function is called by all other functions in the package</p>
    <p style="font-size:15px">does not take into account returner strength</p>
    <p style="font-size:15px">source code is on github if anyone wants to make it better</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3><code>simGame</code></h3>

<pre><code class="r">simGame(p = .75, p2 = .56, firstServe = .68)
</code></pre>

<pre><code>## [1] 1
</code></pre>

<h3><code>simGames</code></h3>

<pre><code class="r">games &lt;- simGames(n = 1000, p = .75, p2 = .56, firstServe = .68)
games
</code></pre>

<pre><code>## 
## Simulation of 1000 service games:
## Server won 0.899 (899/1000) of games.
## 
## Server probabilities:
##     p   p2 firstServe
##  0.75 0.56       0.68
</code></pre>

<p><aside class="notes">
    <p style="font-size:15px">simGame simulates the server winning a game on his serve</p>
    <p style="font-size:15px">while simGames simulates many games, an alternative to using simGame inside replicate</p>
    <p style="font-size:15px">simGames returns a lot of data about those simulated games</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3><code>simSet</code> and <code>simSets</code></h3>

<pre><code class="r">sets &lt;- simSets(n = 1000, pA = .75, p2A = .56, firstServeA = .68,
                pB = .68, p2B = .53, firstServeB = .63, playTiebreak = TRUE)
</code></pre>

<p><img src="assets/fig/simSets-1.png" alt="plot of chunk simSets"> </p>

<p><aside class="notes">
    <p style="font-size:15px">the sets object returned by the simSets function has a number of methods, including plot</p>
    <p style="font-size:15px">the plot shows the probability of set scores for the given parameters, once again, this can be improved by accounting for players returning ability</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3><code>simMatch</code> and <code>simMatches</code></h3>

<pre><code class="r">matches &lt;- simMatches(n = 1000, sets = 3,
                      pA = .75, p2A = .56, firstServeA = .68,
                      pB = .68, p2B = .53, firstServeB = .63, finalSetTiebreak = TRUE)
</code></pre>

<p><img src="assets/fig/simMatches-1.png" alt="plot of chunk simMatches"> </p>

<p><aside class="notes">
    <p style="font-size:15px">the sets object returned by the simSets function has a number of methods, including plot</p>
    <p style="font-size:15px">the plot shows the probability of set scores for the given parameters, once again, this can be improved by accounting for players returning ability</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2><code>svRshiny</code></h2>

<h3>launch in R</h3>

<pre><code class="r">svRshiny()
</code></pre>

<h3>or visit</h3>

<h2><a href="https://durtal.shinyapps.io/servevolleyR">https://durtal.shinyapps.io/servevolleyR</a></h2>

<p><aside class="notes">
    <p style="font-size:15px">shiny is an R package that enables you to build web applications.  It&#39;s a package developed by the team at RStudio, not sure of Hadley&#39;s contribution to that package, there are a lot of smart guys at RStudio developing some incredible tools, you will want to check them out.</p>
    <p style="font-size:15px">you don&#39;t need to know anything about web development to use this package, just R, however knowing a bit about HTML, CSS and Javascript obviously helps</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='title' data-state=''>
    
    <h1 class="slide-title">example workflow</h1>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>data analysis workflow</h2>

<p><img src="assets/img/hadley-process.jpg"></p>

<p><sub><a href="https://dl.dropboxusercontent.com/u/41902/future-da-5-unconf.pdf">Hadley Wickham, Chief Scientist RStudio</a></sub></p>

<p><aside class="notes">
    <p style="font-size:15px">just to remind ourselves of the worklow</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>obtain/clean</h2>

<h3>tournaments</h3>

<h4><a href="http://www.atpworldtour.com/en/tournaments">http://www.atpworldtour.com/en/tournaments</a></h4>

<h3>matches</h3>

<h4><a href="http://www.atpworldtour.com/en/tournaments/shanghai/5014/overview">http://www.atpworldtour.com/en/tournaments/shanghai/5014/overview</a></h4>

<h3>players</h3>

<h4><a href="http://www.atpworldtour.com/en/players/andy-murray/mc10/player-stats">http://www.atpworldtour.com/en/players/andy-murray/mc10/player-stats</a></h4>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>player data</h2>

<h4><a href="http://www.atpworldtour.com/en/players/andy-murray/mc10/player-stats">http://www.atpworldtour.com/en/players/andy-murray/mc10/player-stats</a></h4>

<p><img src="example/images/andy-murray.jpg"></p>

<p><aside class="notes">
    <p style="font-size:15px">we can see the data we need for the servevolleyR functions</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h4>load <code>rvest</code> for harvesting web data, read in andy murrays stats page using <code>html</code> function</h4>

<pre><code class="r">library(rvest)

andy_murray_page &lt;- html(&quot;http://www.atpworldtour.com/en/players/andy-murray/mc10/player-stats&quot;)
</code></pre>

<h4>extract the first table from andy murrays stats page, his service stats</h4>

<pre><code class="r">andy_murray_stats &lt;- andy_murray_page %&gt;%
    html_table() %&gt;%
    .[[1]]
</code></pre>

<pre><code>##          Service Record    NA
## 1                  Aces 4,663
## 2         Double Faults 1,675
## 3             1st Serve   58%
## 4  1st Serve Points Won   74%
## 5  2nd Serve Points Won   52%
## 6    Break Points Faced 4,099
## 7    Break Points Saved   63%
## 8  Service Games Played 8,443
## 9     Service Games Won   82%
## 10   Service Points Won   65%
</code></pre>

<p><aside class="notes">
    <p style="font-size:15px">andy murrays service stats are now in R, however they still require cleaning, the % symbol suggests that the number is stored as a character.</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h4>change names of dataframe so they are easier to work with</h4>

<pre><code class="r">names(andy_murray_stats) &lt;- c(&quot;stat&quot;, &quot;value&quot;)
</code></pre>

<h4>load <code>dplyr</code> package for manipulating data, and <code>stringr</code> for working with strings</h4>

<pre><code class="r">library(dplyr)
library(stringr)

andy_murray_stats &lt;- andy_murray_stats %&gt;%
    filter(grepl(&quot;1st Serve|2nd Serve&quot;, stat)) %&gt;%
    mutate(new_value = str_replace(value, &quot;[[:punct:]]&quot;, &quot;&quot;),
           new_value = as.numeric(new_value) / 100)

andy_murray_stats
</code></pre>

<pre><code>##                   stat value new_value
## 1            1st Serve   58%      0.58
## 2 1st Serve Points Won   74%      0.74
## 3 2nd Serve Points Won   52%      0.52
</code></pre>

<p><aside class="notes">
    <p style="font-size: 15px">so in just a few lines of code we now have some data that can be used in the servevolleyR package</p>
    <p style="font-size: 15px">the code is probably extremely odd to you if you don&#39;t use R... or maybe still odd if you do .. there are multiple ways you can do things in R</p>
    <p style="font-size: 15px">to make life easier this code could be converted into a function</p>
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>write a function</h2>

<pre><code class="r">(murray &lt;- get_player_stats(player = &quot;andy murray&quot;))
</code></pre>

<pre><code>##                   stat value new_value
## 1            1st Serve   58%      0.58
## 2 1st Serve Points Won   74%      0.74
## 3 2nd Serve Points Won   52%      0.52
</code></pre>

<pre><code class="r">(federer &lt;- get_player_stats(player = &quot;roger federer&quot;))
</code></pre>

<pre><code>##                   stat value new_value
## 1            1st Serve   62%      0.62
## 2 1st Serve Points Won   77%      0.77
## 3 2nd Serve Points Won   57%      0.57
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>write R scripts</h2>

<h3>collect <a href="https://github.com/durtal/talks/blob/gh-pages/traders-conference/example/R/collect-tournament-data.R">tournament data</a></h3>

<h3>collect <a href="https://github.com/durtal/talks/blob/gh-pages/traders-conference/example/R/collect-matches.R">match data</a></h3>

<h3>collect <a href="https://github.com/durtal/talks/blob/gh-pages/traders-conference/example/R/predict-matches.R">player data and predict matches</a></h3>

<h2><a href="https://www.gnu.org/software/make/">Make</a> is used to build a pipeline</h2>

<p><aside class="notes">
    <p style="font-size:15px">Make can be used to manage a project where some files rely on other data, so here, we need the up to date tournament data to see matches being played today, then we need the current matches to find the players.  Make enables us to combine multiple scripts and sources of data into one smooth pipeline
</aside></p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>example Makefile</h2>

<pre><code class="make"># collect data
collect-tournaments:
    Rscript R/collect-tournament-data.R

collect-matches:
    Rscript R/collect-matches.R

predict-matches:
    Rscript R/predict-matches.R

tennis: collect-tournaments collect-matches predict-matches

# build website
HTML_FILES := $(patsubst %.Rmd, %.html ,$(wildcard *.Rmd)) \
              $(patsubst %.md, %.html ,$(wildcard *.md))

all: clean html

html: $(HTML_FILES)

%.html: %.Rmd
    R --vanilla --slave -e &quot;rmarkdown::render(&#39;$&lt;&#39;)&quot;

%.html: %.md
    R --vanilla --slave -e &quot;rmarkdown::render(&#39;$&lt;&#39;)&quot;

.PHONY: clean
clean:
    $(RM) $(HTML_FILES)
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2><code>make tennis</code></h2>

<h2><code>make website</code></h2>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2><a href="http://durtal.github.io/talks/traders-conference/example/">result</a></h2>

<p><img src="assets/img/example-workflow-website.jpg"></p>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section class='title' data-state='' id='slide-12'>
  <h2>Me</h2>
  <h3><a href="https://twitter.com/UTVilla">@UTVilla</a></h3>

<h3><a href="https://github.com/durtal">github/durtal</a></h3>

<h3><a href="http://durtal.github.io/">durtal.github.io</a></h3>

<h3 style="color:#d9220f">t_heslop@hotmail.co.uk</h3>

</section>
    </div>
  </div>
</body>
  <script src="libraries/frameworks/revealjs/lib/js/head.min.js"></script>
  <script src="libraries/frameworks/revealjs/js/reveal.min.js"></script>
  <script>
  // Full list of configuration options available here:
  // https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: true,
    theme: Reveal.getQueryHash().theme || 'night', 
    transition: Reveal.getQueryHash().transition || 'concave', 
    dependencies: [
    // Cross-browser shim that fully implements classList -
    // https://github.com/eligrey/classList.js/
      { src: 'libraries/frameworks/revealjs/lib/js/classList.js', condition: function() { return !document.body.classList;}},
      // Zoom in and out with Alt+click
      { src: 'libraries/frameworks/revealjs/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
      // Speaker notes
      { src: 'libraries/frameworks/revealjs/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
      // Remote control your reveal.js presentation using a touch device
      //{ src: 'libraries/frameworks/revealjs/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
      ]
  });
  </script>  <script>  
$(function (){ 
  $("#example").popover(); 
  $("[rel='tooltip']").tooltip(); 
});  
</script>  
<!-- LOAD HIGHLIGHTER JS FILES -->
<script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- DONE LOADING HIGHLIGHTER JS FILES -->
 

</html>